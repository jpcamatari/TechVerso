<!-- filepath: c:\Users\Usuario\Desktop\PI\TechVerso\vagas\templates\create_job_post.html -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Criar Vaga</title>
	<script>
		function handleFormSubmit(event) {
			event.preventDefault(); // Impede o envio padrão
			const form = event.target;

			// Envia o formulário via POST
			fetch(form.action, {
				method: form.method,
				body: new FormData(form),
				headers: {
					'X-CSRFToken': form.querySelector('[name=csrfmiddlewaretoken]').value
				}
			}).then(response => {
				if (response.ok) {
					alert('Vaga salva com sucesso!');
					form.reset(); // Limpa o formulário
				} else {
					alert('Erro ao salvar a vaga.');
				}
			}).catch(error => {
				console.error('Erro:', error);
				alert('Erro ao salvar a vaga.');
			});
		}
	</script>
</head>
<body>
	<h1>Criar Nova Vaga</h1>
	<form action="." method="post" onsubmit="handleFormSubmit(event)">
		{% csrf_token %}
		{{ form.as_p }}  <!-- Exibe todos os campos do formulário -->
		<button type="submit">Salvar Vaga</button>
		<button type="reset">Limpar</button>
		<button type="button" onclick="history.back()">Voltar</button>
	</form>
</body>
</html>